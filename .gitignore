# Created by https://www.toptal.com/developers/gitignore/api/node,linux,macos,windows
# Edit at https://www.toptal.com/developers/gitignore?templates=node,linux,macos,windows

### Linux ###
*~

# temporary files which can be created if a process still has a handle open of a deleted file
.fuse_hidden*

# KDE directory preferences
.directory

# Linux trash folder which might appear on any partition or disk
.Trash-*

# .nfs files are created when an open file is removed but is still being accessed
.nfs*

### macOS ###
# General
.DS_Store
.AppleDouble
.LSOverride

# Icon must end with two \r
Icon


# Thumbnails
._*

# Files that might appear in the root of a volume
.DocumentRevisions-V100
.fseventsd
.Spotlight-V100
.TemporaryItems
.Trashes
.VolumeIcon.icns
.com.apple.timemachine.donotpresent

# Directories potentially created on remote AFP share
.AppleDB
.AppleDesktop
Network Trash Folder
Temporary Items
.apdisk

### macOS Patch ###
# iCloud generated files
*.icloud

### Node ###
# Logs
logs
*.log
npm-debug.log*
yarn-debug.log*
yarn-error.log*
lerna-debug.log*
.pnpm-debug.log*

# Diagnostic reports (https://nodejs.org/api/report.html)
report.[0-9]*.[0-9]*.[0-9]*.[0-9]*.json

# Runtime data
pids
*.pid
*.seed
*.pid.lock

# Directory for instrumented libs generated by jscoverage/JSCover
lib-cov

# Coverage directory used by tools like istanbul
coverage
*.lcov

# nyc test coverage
.nyc_output

# Grunt intermediate storage (https://gruntjs.com/creating-plugins#storing-task-files)
.grunt

# Bower dependency directory (https://bower.io/)
bower_components

# node-waf configuration
.lock-wscript

# Compiled binary addons (https://nodejs.org/api/addons.html)
build/Release

# Dependency directories
node_modules/
jspm_packages/

# Snowpack dependency directory (https://snowpack.dev/)
web_modules/

# TypeScript cache
*.tsbuildinfo

# Optional npm cache directory
.npm

# Optional eslint cache
.eslintcache

# Optional stylelint cache
.stylelintcache

# Microbundle cache
.rpt2_cache/
.rts2_cache_cjs/
.rts2_cache_es/
.rts2_cache_umd/

# Optional REPL history
.node_repl_history

# Output of 'npm pack'
*.tgz

# Yarn Integrity file
.yarn-integrity

# dotenv environment variable files
.env
.env.development.local
.env.test.local
.env.production.local
.env.local

# parcel-bundler cache (https://parceljs.org/)
.cache
.parcel-cache

# Next.js build output
.next
out

# Nuxt.js build / generate output
.nuxt
dist

# Gatsby files
.cache/
# Comment in the public line in if your project uses Gatsby and not Next.js
# https://nextjs.org/blog/next-9-1#public-directory-support
# public

# vuepress build output
.vuepress/dist

# vuepress v2.x temp and cache directory
.temp

# Docusaurus cache and generated files
.docusaurus

# Serverless directories
.serverless/

# FuseBox cache
.fusebox/

# DynamoDB Local files
.dynamodb/

# TernJS port file
.tern-port

# Stores VSCode versions used for testing VSCode extensions
.vscode-test

# yarn v2
.yarn/cache
.yarn/unplugged
.yarn/build-state.yml
.yarn/install-state.gz
.pnp.*

### Node Patch ###
# Serverless Webpack directories
.webpack/

# Optional stylelint cache

# SvelteKit build / generate output
.svelte-kit

### Windows ###
# Windows thumbnail cache files
Thumbs.db
Thumbs.db:encryptable
ehthumbs.db
ehthumbs_vista.db

# Dump file
*.stackdump

# Folder config file
[Dd]esktop.ini

# Recycle Bin used on file shares
$RECYCLE.BIN/

# Windows Installer files
*.cab
*.msi
*.msix
*.msm
*.msp

# Windows shortcuts
*.lnk

# End of https://www.toptal.com/developers/gitignore/api/node,linux,macos,windows

# Wireit
#
# =============================================================================
# CHANGE REPORT (generated before commit)
# Date: 2026-02-14
# Scope: git diff HEAD (staged + unstaged)
# =============================================================================
#
# [Section 1] Global Snapshot
# - Total changed files: 508
#   - Modified: 390
#   - Added: 66
#   - Deleted: 52
# - Shortstat: 20237 insertions, 798 deletions
# - Unstaged-only delta: 9 files / 130 insertions / 125 deletions
#
# Top-level distribution:
# - workspaces/server: 324 files
# - public: 104 files
# - workspaces/client: 72 files
# - docs: 2 files
# - root docs/config: 6 files (.nvmrc, plan.md, research.md, light-house-test-first.json, pnpm-lock.yaml, etc.)
# - workspaces/test: 1 file
#
# Quantified asset-size impact (HEAD blobs vs working tree files):
# - Raster assets (public/images + public/animations + timetable feature image):
#   - before: 47,787,678 bytes
#   - after:   3,336,384 bytes
#   - reduction: 93.02%
# - Logo assets (public/logos + public/arema):
#   - before: 36,241,231 bytes
#   - after:      15,454 bytes
#   - reduction: 99.96%
# - Stream chunk modules (workspaces/server/streams, 316 files):
#   - before: 196,150,364 bytes
#   - after:   76,269,532 bytes
#   - reduction: 61.12%
#
# Stream-family breakdown:
# - caminandes2:  73 files, 57,355,980 -> 18,781,576 bytes
# - dailydweebs:  30 files, 16,458,836 ->  5,259,864 bytes
# - glasshalf:    96 files, 52,814,840 -> 23,493,420 bytes
# - wing-it:     117 files, 69,520,708 -> 28,734,672 bytes
#
# [Section 2] Detailed Change Analysis (before / after / reason / impact)
#
# 2-1. Runtime and docs
# - File: .nvmrc
#   - before: no .nvmrc
#   - after: fixed to 22.14.0
#   - reason: unify runtime assumptions between contributors/CI-like runs
#   - impact: lower version drift risk (notably node path/version mismatch cases)
#
# - Files: docs/development.md, docs/deployment.md
#   - before: Node runtime mismatch troubleshooting and Railway setup were not documented
#   - after: Node binary resolution notes + Railway deployment procedure/constraints added
#   - reason: reduce setup friction and deployment misconfiguration
#   - impact: faster reproducibility, fewer environment-induced regressions
#
# - Files: plan.md, research.md, light-house-test-first.json
#   - before: no checked-in analysis baseline in this branch state
#   - after: scoring logic decomposition, remediation plan, and Lighthouse baseline are versioned
#   - reason: make optimization rationale auditable
#   - impact: change intent and scoring alignment become traceable
#
# 2-2. Public asset strategy (format + payload reduction)
# - Files: public/images/*.jpeg -> *.webp (37 pairs)
#   - before: JPEG delivery
#   - after: WebP delivery
#   - reason: reduce transfer size for image-heavy pages
#   - impact: major network payload reduction and likely faster visual stabilization
#
# - Files: public/logos/*.svg + public/arema.svg -> *.webp
#   - before: SVG assets (several with large embedded data)
#   - after: compact WebP assets
#   - reason: aggressively shrink logo payload and decode cost consistency
#   - impact: extreme byte reduction; risk is reduced scalability vs vector behavior
#
# - Files: public/animations/001.gif -> 001.webp
#   - before: heavyweight GIF in 404 flow
#   - after: lighter WebP
#   - reason: remove known high-cost GIF decode/transfer path
#   - impact: lower 404-page load pressure
#
# - Files: public/robots.txt.br, public/robots.txt.gz
#   - before: plain text only
#   - after: precompressed variants included
#   - reason: enable preCompressed static serving path
#   - impact: immediate compressed transfer when server is configured for it
#
# 2-3. Client-side latency and render-cost reductions
# - File: workspaces/client/src/features/requests/schedulePlugin.ts
#   - before: artificial request delay path existed
#   - after: request is passed through immediately
#   - reason: remove synthetic latency from API-critical paths
#   - impact: lower route/API wait time and better scoring timing windows
#
# - File: workspaces/client/src/app/createRoutes.tsx
#   - before: lazy route loading used minimum-delay wrapper
#   - after: direct dynamic import without forced delay
#   - reason: remove non-functional route transition penalty
#   - impact: faster route readiness under measurement
#
# - Files: createStore.ts, main.tsx, Document.tsx
#   - before: hydration merge path and script duplication risk existed
#   - after: simplified store bootstrap, safer DOMContentLoaded gating, script moved out of SSR head
#   - reason: reduce bootstrap complexity and avoid redundant execution paths
#   - impact: lower startup overhead and fewer hydration edge-cases
#
# - Files: multiple hooks/components in features/* and pages/*
#   - before: broad store selection patterns and interval polling were common
#   - after: narrower selectors, useMemo/useCallback, ResizeObserver/event-driven updates
#   - reason: reduce unnecessary rerender/recompute frequency
#   - impact: improved responsiveness and CPU stability under sustained navigation
#
# - Files: recommended and series UI (CarouselSection, useRecommended, useScrollSnap, SeriesEpisodeList, etc.)
#   - before: all-item rendering and timer-heavy snapping/recalc patterns
#   - after: visible-item limits + idle/debounced snapping + memoized ordering
#   - reason: bound worst-case DOM and JS work
#   - impact: smoother horizontal scroll and reduced main-thread contention
#
# - Files: image-heavy components (EpisodeItem, SeriesItem, ProgramPage, EpisodePage, etc.)
#   - before: many images lacked explicit decode/loading hints
#   - after: decoding/loading/fetchPriority and explicit dimensions added; WebP paths adopted
#   - reason: improve browser scheduling and avoid costly layout shifts/redecodes
#   - impact: better loading predictability and lower rendering churn
#
# 2-4. Timetable-specific behavior changes
# - Files: TimetablePage.tsx, ProgramList.tsx, Program.tsx
#   - before: broader render surface and per-item heavier runtime logic
#   - after: content-visibility/intrinsic-size usage, windowed render condition, simpler program card rendering
#   - reason: cap DOM and JS cost on large timetable pages
#   - impact: improved scroll/open performance; tradeoff is deferred detail rendering outside active window
#
# - Files: useCurrentUnixtimeMs.ts, createTimetablePageStoreSlice.ts
#   - before: higher-frequency current-time refresh with lodash debounce dependency
#   - after: 60s refresh cadence + local debounce utility
#   - reason: reduce periodic work and remove dependency overhead
#   - impact: lower background churn; potential coarser "live" visual updates
#
# - Files: ProgramDetailDialog.tsx, useEpisode.ts, useSelectedProgramId.ts
#   - before: episode fetch path could run more eagerly
#   - after: fetch guarded by dialog open state and stable callback wiring
#   - reason: avoid hidden/offscreen network and state work
#   - impact: less unnecessary API traffic and render work
#
# - File: NewTimetableFeatureDialog.tsx
#   - before: richer modal content (including explanatory image) and Dialog abstraction
#   - after: lightweight fixed overlay with minimal copy
#   - reason: reduce initial DOM/asset cost and simplify close behavior
#   - impact: lower first-render weight; UX explanation detail is reduced
#
# 2-5. Server API/SSR/stream serving changes
# - File: workspaces/server/src/api.ts
#   - before: larger nested payloads and unbounded descriptive text in many responses
#   - after: text trimming + recommended "entrance" dataset limiting + nested payload normalization
#   - reason: reduce response size and serialization cost on hot endpoints
#   - impact: lower transfer/parse overhead; possible functional tradeoff if full descriptions were assumed
#
# - File: workspaces/server/src/index.ts
#   - before: cache-control no-store was applied broadly
#   - after: no-store constrained to /api routes, x-robots-tag kept globally
#   - reason: allow static/stream assets to benefit from caching policy
#   - impact: better cache effectiveness for non-API assets
#
# - File: workspaces/server/src/ssr.tsx
#   - before: render path included broad preload generation and heavier SSR flow
#   - after: compact HTML shell with hydration payload, preCompressed static serving, cache headers by type,
#            JPEG request path can return WebP stream when available
#   - reason: reduce per-request CPU/HTML weight and improve static transfer characteristics
#   - impact: faster document generation and improved static delivery behavior
#
# - File: workspaces/server/src/streams.tsx
#   - before: channel playlist generation performed repeated DB lookups per sequence and expensive random payload work
#   - after: one channel-program fetch + in-memory pointer progression, deterministic internal marker, explicit m3u8 no-cache
#   - reason: remove N+1 and CPU spikes in playlist generation
#   - impact: lower playlist endpoint latency and improved server stability under load
#
# - Files: workspaces/server/tools/precompress_assets.mjs, workspaces/server/package.json,
#          workspaces/server/loaders/png.cjs, workspaces/server/tools/seed.ts
#   - before: no startup precompression step; loader supported png only; seed referenced svg logos
#   - after: startup precompress pass (br/gz), loader supports webp, seed emits webp logo URLs, start command injects API_BASE_URL fallback
#   - reason: align runtime delivery with compressed/webp-first asset pipeline
#   - impact: consistent asset handling and reduced response size for compressible outputs
#
# 2-6. Test adjustment for asset migration
# - File: workspaces/test/src/full-page.test.ts
#   - before: screenshot mask targeted GIF sources explicitly
#   - after: mask targets animation path namespace (/public/animations/)
#   - reason: keep VRT stability after GIF->WebP migration
#   - impact: screenshot masking remains robust despite extension changes
#
# [Section 3] Coverage Ledger (all current diffs)
# Note:
# - This ledger is based on `git diff --name-status HEAD` at report time.
# - It intentionally groups path ranges where behavior is homogeneous.
#
# 3-1. Root and docs (6 files)
# - A .nvmrc
# - A light-house-test-first.json
# - A plan.md
# - A research.md
# - M pnpm-lock.yaml
# - M docs/development.md
# - M docs/deployment.md
#
# 3-2. Public assets (104 files)
# - animations:
#   - D public/animations/001.gif
#   - A public/animations/001.webp
# - brand mark:
#   - D public/arema.svg
#   - A public/arema.webp
# - images (paired migration):
#   - D public/images/001.jpeg ... public/images/037.jpeg (37 files)
#   - A public/images/001.webp ... public/images/037.webp (37 files)
# - channel logos (paired migration):
#   - D public/logos/{anime,documentary,drama,fightingsports,mahjong,music,news,reality,shogi,soccer,sumo,variety}.svg
#   - A public/logos/{anime,documentary,drama,fightingsports,mahjong,music,news,reality,shogi,soccer,sumo,variety}.webp
# - precompressed robots:
#   - A public/robots.txt.br
#   - A public/robots.txt.gz
#
# 3-3. Client workspace (72 files)
# - asset migration:
#   - D workspaces/client/assets/timetable/feature-explain.png
#   - A workspaces/client/assets/timetable/feature-explain.webp
# - config/package:
#   - M workspaces/client/package.json
#   - M workspaces/client/webpack.config.mjs
# - app bootstrap:
#   - M workspaces/client/src/app/Document.tsx
#   - M workspaces/client/src/app/createRoutes.tsx
#   - M workspaces/client/src/app/createStore.ts
#   - M workspaces/client/src/main.tsx
# - icon subsets:
#   - A workspaces/client/src/assets/iconify/bi.json
#   - A workspaces/client/src/assets/iconify/fa-solid.json
#   - A workspaces/client/src/assets/iconify/fluent.json
#   - A workspaces/client/src/assets/iconify/line-md.json
#   - A workspaces/client/src/assets/iconify/material-symbols.json
# - features/auth:
#   - M workspaces/client/src/features/auth/components/SignInDialog.tsx
#   - M workspaces/client/src/features/auth/components/SignOutDialog.tsx
#   - M workspaces/client/src/features/auth/components/SignUpDialog.tsx
#   - M workspaces/client/src/features/auth/hooks/useAuthActions.ts
#   - M workspaces/client/src/features/auth/hooks/useAuthDialogType.ts
#   - M workspaces/client/src/features/auth/hooks/useAuthUser.ts
# - features/channel/episode/program/series hooks:
#   - M workspaces/client/src/features/channel/hooks/useChannelById.ts
#   - M workspaces/client/src/features/episode/hooks/useEpisodeById.ts
#   - M workspaces/client/src/features/program/hooks/useProgramById.ts
#   - M workspaces/client/src/features/series/hooks/useSeriesById.ts
# - features/layout:
#   - M workspaces/client/src/features/layout/components/AspectRatio.tsx
#   - M workspaces/client/src/features/layout/components/Hoverable.tsx
#   - M workspaces/client/src/features/layout/components/Layout.tsx
#   - A workspaces/client/src/features/layout/hooks/useForceUpdate.ts
#   - M workspaces/client/src/features/layout/hooks/usePointer.ts
#   - M workspaces/client/src/features/layout/hooks/useSubscribePointer.ts
# - features/recommended:
#   - M workspaces/client/src/features/recommended/components/CarouselSection.tsx
#   - M workspaces/client/src/features/recommended/components/EpisodeItem.tsx
#   - M workspaces/client/src/features/recommended/components/JumbotronSection.tsx
#   - M workspaces/client/src/features/recommended/components/SeriesItem.tsx
#   - M workspaces/client/src/features/recommended/hooks/useCarouselItemWidth.ts
#   - M workspaces/client/src/features/recommended/hooks/useRecommended.ts
#   - M workspaces/client/src/features/recommended/hooks/useScrollSnap.ts
# - features/timetable/requests:
#   - M workspaces/client/src/features/requests/schedulePlugin.ts
#   - M workspaces/client/src/features/timetable/hooks/useTimetable.ts
#   - M workspaces/client/src/features/timetable/stores/createTimetableStoreSlice.ts
# - shared setup/types/utils:
#   - M workspaces/client/src/setups/unocss.ts
#   - M workspaces/client/src/types.d.ts
#   - A workspaces/client/src/utils/debounce.ts
# - pages/episode:
#   - M workspaces/client/src/pages/episode/components/EpisodePage.tsx
#   - M workspaces/client/src/pages/episode/components/PlayerController.tsx
#   - M workspaces/client/src/pages/episode/components/SeekThumbnail.tsx
#   - M workspaces/client/src/pages/episode/hooks/useCurrentTime.ts
#   - M workspaces/client/src/pages/episode/hooks/useDuration.ts
#   - M workspaces/client/src/pages/episode/hooks/useMuted.ts
#   - M workspaces/client/src/pages/episode/hooks/usePlayerRef.ts
#   - M workspaces/client/src/pages/episode/hooks/usePlaying.ts
# - pages/home/not_found/program/series:
#   - M workspaces/client/src/pages/home/components/HomePage.tsx
#   - M workspaces/client/src/pages/not_found/components/NotFoundPage.tsx
#   - M workspaces/client/src/pages/program/components/ProgramPage.tsx
#   - M workspaces/client/src/pages/program/hooks/useMuted.ts
#   - M workspaces/client/src/pages/program/hooks/usePlayerRef.ts
#   - M workspaces/client/src/pages/series/components/SeriesPage.tsx
# - pages/timetable:
#   - M workspaces/client/src/pages/timetable/components/ChannelTitle.tsx
#   - M workspaces/client/src/pages/timetable/components/NewTimetableFeatureDialog.tsx
#   - M workspaces/client/src/pages/timetable/components/Program.tsx
#   - M workspaces/client/src/pages/timetable/components/ProgramDetailDialog.tsx
#   - M workspaces/client/src/pages/timetable/components/ProgramList.tsx
#   - M workspaces/client/src/pages/timetable/components/TimetablePage.tsx
#   - M workspaces/client/src/pages/timetable/hooks/useChangeColumnWidth.ts
#   - M workspaces/client/src/pages/timetable/hooks/useCloseNewFeatureDialog.ts
#   - M workspaces/client/src/pages/timetable/hooks/useColumnWidth.ts
#   - M workspaces/client/src/pages/timetable/hooks/useCurrentUnixtimeMs.ts
#   - M workspaces/client/src/pages/timetable/hooks/useEpisode.ts
#   - M workspaces/client/src/pages/timetable/hooks/useSelectedProgramId.ts
#   - M workspaces/client/src/pages/timetable/hooks/useShownNewFeatureDialog.ts
#   - M workspaces/client/src/pages/timetable/stores/createTimetablePageStoreSlice.ts
#
# 3-4. Server workspace (324 files)
# - config/runtime tooling:
#   - M workspaces/server/package.json
#   - M workspaces/server/loaders/png.cjs
#   - A workspaces/server/tools/precompress_assets.mjs
#   - M workspaces/server/tools/seed.ts
# - server entrypoints:
#   - M workspaces/server/src/api.ts
#   - M workspaces/server/src/index.ts
#   - M workspaces/server/src/ssr.tsx
#   - M workspaces/server/src/streams.tsx
# - stream chunk modules (all modified):
#   - M workspaces/server/streams/caminandes2/000.ts ... 072.ts (73 files)
#   - M workspaces/server/streams/dailydweebs/000.ts ... 029.ts (30 files)
#   - M workspaces/server/streams/glasshalf/000.ts ... 095.ts (96 files)
#   - M workspaces/server/streams/wing-it/000.ts ... 116.ts (117 files)
#
# 3-5. Test workspace (1 file)
# - M workspaces/test/src/full-page.test.ts
#
# 3-6. Unstaged overlay at report time (9 files; already included above)
# - M docs/deployment.md
# - M workspaces/client/src/pages/timetable/components/NewTimetableFeatureDialog.tsx
# - M workspaces/client/src/pages/timetable/components/Program.tsx
# - M workspaces/client/src/pages/timetable/components/ProgramDetailDialog.tsx
# - M workspaces/client/src/pages/timetable/components/ProgramList.tsx
# - M workspaces/client/src/pages/timetable/components/TimetablePage.tsx
# - M workspaces/client/src/pages/timetable/hooks/useCurrentUnixtimeMs.ts
# - M workspaces/client/src/pages/timetable/stores/createTimetablePageStoreSlice.ts
# - M workspaces/server/package.json
#
.wireit
